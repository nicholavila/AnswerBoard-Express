"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[784],{70845:function(e,a,n){n.r(a);var t=n(1413),r=n(74165),s=n(15861),i=n(70885),o=n(47313),c=n(65832),d=n(21366),l=n(93298),u=n(7410),f=n(3463),m=n(24751),v=n(34491),b=n(58467),p=n(46417);a.default=function(){var e=(0,b.UO)(),a=(0,b.s0)(),n=(0,o.useState)([]),Z=(0,i.Z)(n,2),h=Z[0],x=Z[1],j=(0,o.useState)([]),g=(0,i.Z)(j,2),y=g[0],N=g[1],C=(0,o.useState)({no:"",year:"",subject:"",name:"",description:""}),P=(0,i.Z)(C,2),w=P[0],k=P[1],O=f.Ry({no:f.Rx().typeError("Must be a number.").required("Please enter an order.").test("","Must be between 1 and 99.",(function(e){return e||(e=0),!(e<1||e>99)})),subject:f.Z_("Choose a subject.").required("Subject is required."),name:f.Z_("Enter a topic name.").test("len","Must be less than 64 characters.",(function(e){return e||(e=""),e.length<64})).required("Please enter a name.")});(0,o.useEffect)((function(){(0,s.Z)((0,r.Z)().mark((function e(){var a,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("admin/years/get-all-populate");case 2:a=e.sent,n=a.data,x(n),N(n.length?n[0].subjects:[]);case 6:case"end":return e.stop()}}),e)})))()}),[]),(0,o.useEffect)((function(){(0,s.Z)((0,r.Z)().mark((function a(){var n,s,i;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.id,a.next=3,m.Z.get("admin/modules/".concat(n));case 3:s=a.sent,(i=s.data).status?k((0,t.Z)((0,t.Z)({},w),{},{no:i.data.no,year:i.data.subject.year._id,subject:i.data.subject._id,name:i.data.name,description:i.data.description})):v.Am.error(i.msg);case 6:case"end":return a.stop()}}),a)})))()}),[]);var R=function(e){var a,n=h.findIndex((function(a){return a._id===e.target.value}));a=h.length>n&&h[n].subjects.length>0&&h[n].subjects[0].modules.length>0?h[n].subjects[0].modules[0].no:0,N(h[n].subjects),k((0,t.Z)((0,t.Z)({},w),{},{year:h[n]._id,subject:h[n].subjects.length?h[n].subjects[0]._id:"",no:a+1}))},B=function(e){var a,n=y.findIndex((function(a){return a._id===e.target.value}));a=y.length>n&&y[n].modules.length>0?y[n].modules[0].no:0,k((0,t.Z)((0,t.Z)({},w),{},{subject:e.target.value,no:a+1}))},S=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(t,s){var i,o,c,d;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=s.resetForm,o=e.id,n.next=4,m.Z.put("admin/modules/".concat(o),t);case 4:c=n.sent,(d=c.data).status?(v.Am.success(d.msg),i(),a("/admin/modules")):v.Am.error(d.msg);case 7:case"end":return n.stop()}}),n)})));return function(e,a){return n.apply(this,arguments)}}();return(0,p.jsxs)(c.Z,{children:[(0,p.jsx)(c.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,p.jsx)(c.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h1",children:"Edit module"})}),(0,p.jsx)(c.Z.Body,{children:(0,p.jsx)(u.J9,{validationSchema:O,validateOnChange:!1,validateOnBlur:!1,onSubmit:S,initialValues:w,enableReinitialize:!0,children:function(e){var a=e.handleSubmit,n=e.handleChange,t=e.handleBlur,r=e.values,s=e.touched,i=e.errors;return(0,p.jsxs)(d.Z,{noValidate:!0,onSubmit:a,children:[(0,p.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,p.jsx)(d.Z.Label,{children:"Year:"}),(0,p.jsx)(d.Z.Select,{name:"year",value:r.year,onChange:R,onBlur:t,touched:s,isInvalid:!!i.year,children:h.map((function(e,a){return(0,p.jsx)("option",{value:e._id,children:e.name},a)}))}),(0,p.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i.year})]}),(0,p.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,p.jsx)(d.Z.Label,{children:"Subject:"}),(0,p.jsx)(d.Z.Select,{name:"subject",value:r.subject,onChange:B,onBlur:t,touched:s,isInvalid:!!i.subject,children:y.map((function(e,a){return(0,p.jsx)("option",{value:e._id,children:e.name},a)}))}),(0,p.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i.subject})]}),(0,p.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,p.jsx)(d.Z.Label,{children:"Order:"}),(0,p.jsx)(d.Z.Control,{type:"text",placeholder:"Please enter a module order",name:"no",onChange:n,onBlur:t,value:r.no,touched:s,isInvalid:!!i.no}),(0,p.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i.no})]}),(0,p.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,p.jsx)(d.Z.Label,{children:"Module:"}),(0,p.jsx)(d.Z.Control,{type:"text",placeholder:"Please enter a module name.",name:"name",onChange:n,onBlur:t,value:r.name,touched:s,isInvalid:!!i.name}),(0,p.jsx)(d.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,p.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,p.jsx)(d.Z.Label,{children:"Description:"}),(0,p.jsx)(d.Z.Control,{as:"textarea",placeholder:"Please enter a module description.",name:"description",onChange:n,onBlur:t,value:r.description,rows:10})]}),(0,p.jsxs)(l.Z,{type:"submit",variant:"primary",className:"float-end",children:[(0,p.jsx)("i",{className:"fa fa-save"})," Update"]})]})}})})]})}},16184:function(e,a,n){n.d(a,{FT:function(){return o}});var t=n(70885),r=n(47313),s=n(46417),i=["as","disabled"];function o(e){var a=e.tagName,n=e.disabled,t=e.href,r=e.target,s=e.rel,i=e.role,o=e.onClick,c=e.tabIndex,d=void 0===c?0:c,l=e.type;a||(a=null!=t||null!=r||null!=s?"a":"button");var u={tagName:a};if("button"===a)return[{type:l||"button",disabled:n},u];var f=function(e){(n||"a"===a&&function(e){return!e||"#"===e.trim()}(t))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===a&&(t||(t="#"),n&&(t=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:n?void 0:d,href:t,target:"a"===a?r:void 0,"aria-disabled":n||void 0,rel:"a"===a?s:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},u]}var c=r.forwardRef((function(e,a){var n=e.as,r=e.disabled,c=function(e,a){if(null==e)return{};var n,t,r={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,i),d=o(Object.assign({tagName:n,disabled:r},c)),l=(0,t.Z)(d,2),u=l[0],f=l[1].tagName;return(0,s.jsx)(f,Object.assign({},c,u,{ref:a}))}));c.displayName="Button",a.ZP=c},93298:function(e,a,n){var t=n(1413),r=n(70885),s=n(45987),i=n(46123),o=n.n(i),c=n(47313),d=n(16184),l=n(68524),u=n(46417),f=["as","bsPrefix","variant","size","active","className"],m=c.forwardRef((function(e,a){var n=e.as,i=e.bsPrefix,c=e.variant,m=e.size,v=e.active,b=e.className,p=(0,s.Z)(e,f),Z=(0,l.vE)(i,"btn"),h=(0,d.FT)((0,t.Z)({tagName:n},p)),x=(0,r.Z)(h,2),j=x[0],g=x[1].tagName;return(0,u.jsx)(g,(0,t.Z)((0,t.Z)((0,t.Z)({},j),p),{},{ref:a,className:o()(b,Z,v&&"active",c&&"".concat(Z,"-").concat(c),m&&"".concat(Z,"-").concat(m),p.href&&p.disabled&&"disabled")}))}));m.displayName="Button",m.defaultProps={variant:"primary",active:!1,disabled:!1},a.Z=m},65832:function(e,a,n){n.d(a,{Z:function(){return B}});var t=n(1413),r=n(45987),s=n(46123),i=n.n(s),o=n(47313),c=n(68524),d=n(28864),l=n(96205),u=n(46417),f=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,o=e.variant,d=e.as,l=void 0===d?"img":d,m=(0,r.Z)(e,f),v=(0,c.vE)(n,"card-img");return(0,u.jsx)(l,(0,t.Z)({ref:a,className:i()(o?"".concat(v,"-").concat(o):v,s)},m))}));m.displayName="CardImg";var v=m,b=n(15614),p=["bsPrefix","className","as"],Z=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,d=e.as,l=void 0===d?"div":d,f=(0,r.Z)(e,p),m=(0,c.vE)(n,"card-header"),v=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,u.jsx)(b.Z.Provider,{value:v,children:(0,u.jsx)(l,(0,t.Z)((0,t.Z)({ref:a},f),{},{className:i()(s,m)}))})}));Z.displayName="CardHeader";var h=Z,x=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,l.Z)("h5"),g=(0,l.Z)("h6"),y=(0,d.Z)("card-body"),N=(0,d.Z)("card-title",{Component:j}),C=(0,d.Z)("card-subtitle",{Component:g}),P=(0,d.Z)("card-link",{Component:"a"}),w=(0,d.Z)("card-text",{Component:"p"}),k=(0,d.Z)("card-footer"),O=(0,d.Z)("card-img-overlay"),R=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,o=e.bg,d=e.text,l=e.border,f=e.body,m=e.children,v=e.as,b=void 0===v?"div":v,p=(0,r.Z)(e,x),Z=(0,c.vE)(n,"card");return(0,u.jsx)(b,(0,t.Z)((0,t.Z)({ref:a},p),{},{className:i()(s,Z,o&&"bg-".concat(o),d&&"text-".concat(d),l&&"border-".concat(l)),children:f?(0,u.jsx)(y,{children:m}):m}))}));R.displayName="Card",R.defaultProps={body:!1};var B=Object.assign(R,{Img:v,Title:N,Subtitle:C,Body:y,Link:P,Text:w,Header:h,Footer:k,ImgOverlay:O})},15614:function(e,a,n){var t=n(47313).createContext(null);t.displayName="CardHeaderContext",a.Z=t},28864:function(e,a,n){n.d(a,{Z:function(){return m}});var t=n(1413),r=n(45987),s=n(46123),i=n.n(s),o=/-(.)/g;var c=n(47313),d=n(68524),l=n(46417),u=["className","bsPrefix","as"],f=function(e){return e[0].toUpperCase()+(a=e,a.replace(o,(function(e,a){return a.toUpperCase()}))).slice(1);var a};function m(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.displayName,s=void 0===n?f(e):n,o=a.Component,m=a.defaultProps,v=c.forwardRef((function(a,n){var s=a.className,c=a.bsPrefix,f=a.as,m=void 0===f?o||"div":f,v=(0,r.Z)(a,u),b=(0,d.vE)(c,e);return(0,l.jsx)(m,(0,t.Z)({ref:n,className:i()(s,b)},v))}));return v.defaultProps=m,v.displayName=s,v}},96205:function(e,a,n){var t=n(1413),r=n(47313),s=n(46123),i=n.n(s),o=n(46417);a.Z=function(e){return r.forwardRef((function(a,n){return(0,o.jsx)("div",(0,t.Z)((0,t.Z)({},a),{},{ref:n,className:i()(a.className,e)}))}))}},21024:function(e){var a=function(){};e.exports=a},11752:function(e,a,n){n.d(a,{Z:function(){return s}});var t=n(61120);function r(e,a){for(;!Object.prototype.hasOwnProperty.call(e,a)&&null!==(e=(0,t.Z)(e)););return e}function s(){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,a,n){var t=r(e,a);if(t){var s=Object.getOwnPropertyDescriptor(t,a);return s.get?s.get.call(arguments.length<3?e:n):s.value}},s.apply(this,arguments)}}}]);