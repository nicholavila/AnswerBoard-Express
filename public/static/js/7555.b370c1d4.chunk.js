"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7555],{84379:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(1413),r=n(21366),i=n(465),s=n(93298),o=n(42982),c=n(47313),u=n(38804),l=n(46417),d=function(e,t){var n=t-e+1;return Array.from({length:n},(function(t,n){return n+e}))},p=function(e){var t=e.search,n=e.pagination,r=e.onChange,i=e.siblingCount,s=void 0===i?1:i,p=e.className,g=function(e){var t=e.totalCount,n=e.pageSize,a=e.siblingCount,r=void 0===a?1:a,i=e.currentPage;return(0,c.useMemo)((function(){var e=Math.ceil(t/n);if(r+5>=e)return d(1,e);var a=Math.max(i-r,1),s=Math.min(i+r,e),c=a>2,u=s<e-2,l=1,p=e;if(!c&&u){var g=d(1,3+2*r);return[].concat((0,o.Z)(g),["DOTS",e])}if(c&&!u){var h=d(e-(3+2*r)+1,e);return[l,"DOTS"].concat((0,o.Z)(h))}if(c&&u){var f=d(a,s);return[l,"DOTS"].concat((0,o.Z)(f),["DOTS",p])}}),[t,n,r,i])}({currentPage:n.page,totalCount:n.totalCount,pageSize:n.pageSize,siblingCount:s});if(0===n.page||g.length<1)return null;var h=g[g.length-1];return(0,l.jsxs)(u.Z,{className:p,children:[(0,l.jsx)(u.Z.First,{onClick:function(){r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:1})})}}),(0,l.jsx)(u.Z.Prev,{onClick:function(){n.page>1&&r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:n.page-1})})}}),g.map((function(e,i){return"DOTS"===e?(0,l.jsx)(u.Z.Ellipsis,{},i):n.page===e?(0,l.jsx)(u.Z.Item,{active:!0,onClick:function(){return r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:e})})},children:e},i):(0,l.jsx)(u.Z.Item,{onClick:function(){return r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:e})})},children:e},i)})),(0,l.jsx)(u.Z.Next,{onClick:function(){n.page<h&&r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:n.page+1})})}}),(0,l.jsx)(u.Z.Last,{onClick:function(){r({search:t,pagination:(0,a.Z)((0,a.Z)({},n),{},{page:h})})}})]})},g=function(e){var t=e.pageItems,n=void 0===t?[5,10,20,50,100]:t,o=e.columns,c=e.data,u=void 0===c?[]:c,d=e.options,g=void 0===d?{responsive:!0,bordered:!0,center:!0}:d,h=e.pagination,f=void 0===h?{page:1,totalCount:10,pageSize:10}:h,m=e.sort,x=e.search,y=e.onChange,Z=e.emptyText,v=void 0===Z?"Empty data":Z,j=e.onRow,b=void 0===j?function(){}:j;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,l.jsx)(r.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:f.pageSize,onChange:function(e){return y({search:x,pagination:(0,a.Z)((0,a.Z)({},f),{},{pageSize:Number(e.target.value),page:1})})},children:n.map((function(e,t){return(0,l.jsx)("option",{value:e,children:e},t)}))}),(0,l.jsx)(r.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&y({search:e.target.value,pagination:(0,a.Z)((0,a.Z)({},f),{},{page:1})})}(e)}})]}),(0,l.jsxs)(i.Z,{className:"datatable "+(g.center?"text-center":""),responsive:g.responsive,bordered:g.bordered,hover:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:o.map((function(e,t){return(0,l.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,l.jsxs)(s.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,t){var n="asc";void 0===t?n="asc":"asc"===t.dir?n="desc":"desc"===t.dir&&(n="asc"),y({search:x,pagination:f,sort:{key:e,dir:n}})}(e.key,m)},children:[("undefined"===typeof m||m.key!==e.key)&&(0,l.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof m&&m.key===e.key&&"asc"===m.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof m&&m.key===e.key&&"desc"===m.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},t)}))})}),(0,l.jsx)("tbody",{children:u.length?u.map((function(e,t){return(0,l.jsx)("tr",{onClick:function(){return b(e._id)},children:o.map((function(n,a){return n.render?(0,l.jsx)("td",{children:n.render(e,t)},a):(0,l.jsx)("td",{children:e[n.key]},a)}))},t)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:o.length,className:"text-center text-danger",children:v})})})]}),(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,l.jsx)(p,{search:x,pagination:f,onChange:y})})]})}},7555:function(e,t,n){n.r(t);var a=n(74165),r=n(1413),i=n(15861),s=n(70885),o=n(47313),c=n(65832),u=n(63849),l=n(31616),d=n(76736),p=n(75743),g=n(24751),h=n(84379),f=n(70816),m=n.n(f),x=n(46417);d.kL.register(d.uw,d.f$,d.od,d.jn,d.Dx,d.u,d.De);t.default=function(){var e=(0,o.useState)(0),t=(0,s.Z)(e,2),n=t[0],d=t[1],f=(0,o.useState)([]),y=(0,s.Z)(f,2),Z=y[0],v=y[1],j=(0,o.useState)(""),b=(0,s.Z)(j,2),k=b[0],C=b[1],S=(0,o.useState)(),w=(0,s.Z)(S,2),N=w[0],D=w[1],z=(0,o.useState)({page:1,totalCount:0,pageSize:10}),M=(0,s.Z)(z,2),A=M[0],T=M[1],Y=(0,o.useState)([]),P=(0,s.Z)(Y,2),I=P[0],O=P[1],E=(0,o.useState)([]),R=(0,s.Z)(E,2),J=R[0],L=R[1],_={labels:I,datasets:[{label:"Income",data:J,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},F=(0,o.useState)([]),K=(0,s.Z)(F,2),U=K[0],W=K[1],B={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Income",data:U,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},H=(0,o.useState)([]),V=(0,s.Z)(H,2),$=V[0],q=V[1],G=(0,o.useState)([]),Q=(0,s.Z)(G,2),X=Q[0],ee=Q[1],te={labels:$,datasets:[{label:"Income",data:X,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},ne=[{key:"_id",name:"No",width:65,render:function(e,t){return t+1}},{key:"transaction_id",name:"Transaction number"},{key:"user",name:"User",render:function(e,t){return e.user.firstName+" "+e.user.lastName}},{key:"amount",name:"Amount",width:120},{key:"currency",name:"Currency",width:120},{key:"type",name:"Payment type",width:160},{key:"createdAt",name:"Paid date",render:function(e){return m()(e.createdAt).format("DD/MM/YYYY")},width:180}];(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("admin/transactions",{params:{search:k,length:A.pageSize,page:A.page,sortKey:N?N.key:"",sortDir:N?N.dir:""}});case 2:t=e.sent,n=t.data,v(n.data),T((0,r.Z)((0,r.Z)({},A),{},{totalCount:n.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Z.get("admin/transactions/get-statistics");case 2:t=e.sent,n=t.data,O(n.weeklyStatistics.map((function(e){return m()(e.date).format("DD/MM/YYYY")}))),L(n.weeklyStatistics.map((function(e){return e.amount}))),W(n.monthlyStatistics.map((function(e){return e.amount}))),q(n.annuallyStatistics.map((function(e){return e.year}))),ee(n.annuallyStatistics.map((function(e){return e.amount})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,x.jsxs)(c.Z,{children:[(0,x.jsx)(c.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,x.jsx)(c.Z.Title,{as:"h1",bsPrefix:"mb-0 card-title text-light",style:{fontSize:24},children:"Sales management"})}),(0,x.jsxs)(c.Z.Body,{children:[(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Last 7 days sales"}}},data:_,height:300})})}),(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Monthly sales"}}},data:B,height:300})})}),(0,x.jsx)(l.Z,{md:4,children:(0,x.jsx)("div",{style:{margin:".5rem"},children:(0,x.jsx)(p.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Annually sales"}}},data:te,height:300})})})]}),(0,x.jsx)("hr",{}),(0,x.jsx)(h.Z,{columns:ne,data:Z,sort:N,search:k,pagination:A,onChange:function(e){var t=e.search,a=e.pagination,r=e.sort;D(r),C(t),T(a),d(!n)}})]})]})}}}]);