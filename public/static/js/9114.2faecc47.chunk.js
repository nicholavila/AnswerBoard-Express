"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9114],{89114:function(e,t,a){a.r(t);var i=a(4942),n=a(74165),s=a(1413),r=a(15861),l=a(70885),c=a(47313),o=a(65832),d=a(21366),u=a(63849),m=a(31616),p=a(93298),h=a(7410),f=a(3463),b=a(24751),g=a(3979),_=a(34491),y=a(58467),Z=a(7155),x=a(89094),j=a.n(x),k=a(76666),v=a.n(k),w=a(46417),C=document.createElement("script");C.type="text/javascript",C.src="https://www.wiris.net/demo/plugins/app/WIRISplugins.js?viewer=image",document.head.appendChild(C),window.$=v(),window.tinymce=a(86821),a(37741);t.default=function(){var e=(0,c.useRef)(null),t=(0,c.useRef)(null),a=(0,c.useRef)(null),x=(0,c.useRef)(null),k=(0,y.s0)(),v=(0,c.useState)(!1),C=(0,l.Z)(v,2),S=C[0],M=C[1],N=(0,c.useState)([]),q=(0,l.Z)(N,2),R=q[0],I=q[1],F=(0,c.useState)([]),G=(0,l.Z)(F,2),L=G[0],E=G[1],A=(0,c.useState)([]),B=(0,l.Z)(A,2),T=B[0],z=B[1],H=(0,c.useState)([]),P=(0,l.Z)(H,2),O=P[0],Q=P[1],V=(0,c.useState)([]),Y=(0,l.Z)(V,2),D=Y[0],J=Y[1],W=(0,c.useState)({year:"",subject:"",modules:[],topics:[],subtopics:[],name:"",content:"",permission:2,totalMarks:0,syllabusRef:"",markingCrit:"",sampleSolution:"",tags:[]}),$=(0,l.Z)(W,2),K=$[0],U=$[1],X=f.Ry({year:f.Z_("Choose a year.").required("Year is required."),subject:f.Z_("Choose a subject.").required("Subject is required"),totalMarks:f.Rx("Total marks must be number.").required("Total marks is required."),syllabusRef:f.Z_("Enter a syllabus reference.").required("Syllabus reference is required.")});(0,c.useEffect)((function(){(0,r.Z)((0,n.Z)().mark((function e(){var t,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.Z.get("/admin/questions/parents");case 2:if(t=e.sent,(a=t.data).years.length&&a.years[0].subjects.length)for(i in a.modules)a.modules[i].subject===a.years[0].subjects[0]._id&&(a.modules[i].shown=!0);I(a.years),E(a.years.length?a.years[0].subjects:[]),z(a.modules),Q(a.topics),J(a.subtopics),U((0,s.Z)((0,s.Z)({},K),{},{year:a.years.length?a.years[0]._id:"",subject:a.years.length&&a.years[0].subjects.length?a.years[0].subjects[0]._id:"",modules:[],topics:[],subtopics:[]}));case 11:case"end":return e.stop()}}),e)})))()}),[]);var ee=function(e){var t=R.findIndex((function(t){return t._id===e.target.value}));for(var a in T)T[a].checked=!1,T[a].shown=!1,T[a].subject===R[t].subjects[0]._id&&(T[a].shown=!0);for(var i in O)O[i].checked=!1,O[i].shown=!1;for(var n in D)D[n].checked=!1,D[n].shown=!1;E(R[t].subjects),z(T),Q(O),J(D),U((0,s.Z)((0,s.Z)({},K),{},{year:e.target.value,subject:R[t].subjects.length?R[t].subjects[0]._id:"",modules:[],topics:[],subtopics:[]}))},te=function(e){for(var t in T)T[t].checked=!1,T[t].shown=!1,T[t].subject===e.target.value&&(T[t].shown=!0);for(var a in O)O[a].checked=!1,O[a].shown=!1;for(var i in D)D[i].checked=!1,D[i].shown=!1;z(T),Q(O),J(D),U((0,s.Z)((0,s.Z)({},K),{},{subject:e.target.value,modules:[],topics:[],subtopics:[]}))},ae=function(e){var t=T.findIndex((function(t){return t._id===e.target.value}));for(var a in T[t].checked=e.target.checked,O)if(O[a].module===T[t]._id){if(e.target.checked)O[a].shown=!0;else for(var i in O[a].shown=!1,D)D[i].topic===O[a]._id&&(D[i].shown=!1,D[i].checked=!1);O[a].checked=!1}var n=[];for(var r in T)T[r].checked&&n.push(T[r]._id);var l=[];for(var c in O)O[c].checked&&l.push(O[c]._id);var o=[];for(var d in D)D[d].checked&&o.push(D[d]._id);z(T),Q(O),J(D),M(!S),U((0,s.Z)((0,s.Z)({},K),{},{modules:n,topics:l,subtopics:o}))},ie=function(e){var t=O.findIndex((function(t){return t._id===e.target.value}));for(var a in O[t].checked=e.target.checked,D)D[a].topic===O[t]._id&&(e.target.checked?D[a].shown=!0:D[a].shown=!1,D[a].checked=!1);var i=[];for(var n in O)O[n].checked&&i.push(O[n]._id);var r=[];for(var l in D)D[l].checked&&r.push(D[l]._id);Q(O),J(D),M(!S),U((0,s.Z)((0,s.Z)({},K),{},{topics:i,subtopics:r}))},ne=function(e){var t=D.findIndex((function(t){return t._id===e.target.value}));D[t].checked=e.target.checked;var a=[];for(var i in D)D[i].checked&&a.push(D[i]._id);J(D),M(!S),U((0,s.Z)((0,s.Z)({},K),{},{subtopics:a}))},se=function(e){U((0,s.Z)((0,s.Z)({},K),{},{permission:Number(e.target.value)}))},re=function(e){U((0,s.Z)((0,s.Z)({},K),{},{syllabusRef:e.target.value}))},le=function(e){U((0,s.Z)((0,s.Z)({},K),{},{totalMarks:e.target.value}))},ce=function(e){e.length>5||U((0,s.Z)((0,s.Z)({},K),{},{tags:e}))},oe=function(){var i=(0,r.Z)((0,n.Z)().mark((function i(s,r){var l,c,o;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l=r.resetForm,s.content=e.current.getContent(),s.name=t.current.getContent(),s.markingCrit=a.current.getContent(),s.sampleSolution=x.current.getContent(),i.next=7,b.Z.post("admin/questions",s);case 7:c=i.sent,(o=c.data).success?(_.Am.success(o.msg),l(),k("/admin/question")):_.Am.error(o.msg);case 10:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}();return(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(o.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,w.jsx)(o.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h1",children:"New Question"})}),(0,w.jsx)(o.Z.Body,{children:(0,w.jsx)(h.J9,{validationSchema:X,validateOnChange:!1,validateOnBlur:!1,onSubmit:oe,initialValues:K,enableReinitialize:!0,children:function(n){var s,r,l,c,o=n.handleSubmit,h=(n.handleChange,n.handleBlur),f=n.values,b=n.touched,_=n.errors;return(0,w.jsxs)(d.Z,{noValidate:!0,onSubmit:o,children:[(0,w.jsxs)(u.Z,{children:[(0,w.jsxs)(m.Z,{md:6,children:[(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Year:"}),(0,w.jsx)(d.Z.Select,{name:"year",value:f.year,onChange:ee,onBlur:h,touched:b,isInvalid:!!_.year,children:R.map((function(e,t){return(0,w.jsx)("option",{value:e._id,children:e.name},t)}))}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.year})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Subject:"}),(0,w.jsx)(d.Z.Select,{name:"subject",value:f.subject,onChange:te,onBlur:h,touched:b,isInvalid:!!_.subject,children:L.map((function(e,t){return(0,w.jsx)("option",{value:e._id,children:e.name},t)}))}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.subject})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Module:"}),(0,w.jsx)("br",{}),(0,w.jsx)(u.Z,{children:T.map((function(e,t){return e.shown&&(0,w.jsx)(m.Z,{sm:6,children:(0,w.jsx)(d.Z.Check,{inline:!0,label:e.name,name:"module-item",value:e._id,type:"checkbox",id:"module-".concat(e._id),checked:e.checked,className:"checkbox-module",onChange:ae})},t)}))}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.name})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Topic:"}),(0,w.jsx)("br",{}),(0,w.jsx)(u.Z,{children:O.map((function(e,t){return e.shown&&(0,w.jsx)(m.Z,{sm:6,children:(0,w.jsx)(d.Z.Check,{inline:!0,label:e.name,name:"module-item",value:e._id,type:"checkbox",checked:e.checked,id:"topic-".concat(e._id),onChange:ie})},t)}))}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.name})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"SubTopic:"}),(0,w.jsx)("br",{}),(0,w.jsx)(u.Z,{children:D.map((function(e,t){return e.shown&&(0,w.jsx)(m.Z,{sm:6,children:(0,w.jsx)(d.Z.Check,{inline:!0,label:e.name,name:"module-item",value:e._id,type:"checkbox",checked:e.checked,id:"subTopic-".concat(e._id),onChange:ne})},t)}))}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.name})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Check,{inline:!0,type:"radio",name:"permission",label:"Open",id:"permission-1",value:"0",checked:0===f.permission,onChange:se,onBlur:h}),(0,w.jsx)(d.Z.Check,{inline:!0,type:"radio",name:"permission",label:"Free",id:"permission-2",value:"1",checked:1===f.permission,onChange:se,onBlur:h}),(0,w.jsx)(d.Z.Check,{inline:!0,type:"radio",name:"permission",label:"Premium",id:"permission-3",value:"2",checked:2===f.permission,onChange:se,onBlur:h})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Question:"}),(0,w.jsx)(Z.M,{tinymceScriptSrc:"/tinymce/tinymce.min.js",onInit:function(e,a){return t.current=a},init:(s={height:150,menubar:!1,selector:"textarea",block_unsupported_drop:!1,automatic_uploads:!0,file_picker_callback:function(e,t,a){"file"==a.filetype&&e("mypage.html",{text:"My text"}),"image"==a.filetype&&e("myimage.jpg",{alt:"My alt text"}),"media"==a.filetype&&e("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","grid","tiny_mce_wiris","code","table","link","media","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | grid_insert | tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry | help | image",images_upload_handler:g.Z,images_upload_credentials:!0,paste_data_images:!0,paste_as_text:!0},(0,i.Z)(s,"paste_data_images",!0),(0,i.Z)(s,"paste_enable_default_filters",!1),(0,i.Z)(s,"paste_postprocess",(function(e,t){t.node.querySelectorAll("img")})),(0,i.Z)(s,"draggable_modal",!0),(0,i.Z)(s,"content_style","body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"),s),name:"description"}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.name})]})]}),(0,w.jsxs)(m.Z,{md:6,children:[(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Total marks:"}),(0,w.jsx)(d.Z.Control,{type:"text",placeholder:"Please enter total marks.",name:"totalMarks",onChange:le,onBlur:h,value:f.totalMarks,touched:b,isInvalid:!!_.totalMarks}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.totalMarks})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Syllabus reference:"}),(0,w.jsx)(d.Z.Control,{type:"text",placeholder:"Please enter syllabus reference.",name:"syllabusRef",onChange:re,onBlur:h,value:f.syllabusRef,touched:b,isInvalid:!!_.syllabusRef}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.syllabusRef})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Marking criteria:"}),(0,w.jsx)(Z.M,{tinymceScriptSrc:"/tinymce/tinymce.min.js",onInit:function(e,t){return a.current=t},init:(r={height:150,menubar:!1,selector:"textarea",block_unsupported_drop:!1,automatic_uploads:!0,file_picker_callback:function(e,t,a){"file"==a.filetype&&e("mypage.html",{text:"My text"}),"image"==a.filetype&&e("myimage.jpg",{alt:"My alt text"}),"media"==a.filetype&&e("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","grid","tiny_mce_wiris","code","table","link","media","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | grid_insert | tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry | help | image",images_upload_handler:g.Z,images_upload_credentials:!0,paste_data_images:!0,paste_as_text:!0},(0,i.Z)(r,"paste_data_images",!0),(0,i.Z)(r,"paste_enable_default_filters",!1),(0,i.Z)(r,"paste_postprocess",(function(e,t){t.node.querySelectorAll("img")})),(0,i.Z)(r,"draggable_modal",!0),(0,i.Z)(r,"content_style","body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"),r),name:"description"}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.markingCrit})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Sample solution:"}),(0,w.jsx)(Z.M,{tinymceScriptSrc:"/tinymce/tinymce.min.js",onInit:function(e,t){return x.current=t},init:(l={height:150,menubar:!1,selector:"textarea",block_unsupported_drop:!1,automatic_uploads:!0,file_picker_callback:function(e,t,a){"file"==a.filetype&&e("mypage.html",{text:"My text"}),"image"==a.filetype&&e("myimage.jpg",{alt:"My alt text"}),"media"==a.filetype&&e("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","grid","tiny_mce_wiris","code","table","link","media","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | grid_insert | tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry | help | image",images_upload_handler:g.Z,images_upload_credentials:!0,paste_data_images:!0,paste_as_text:!0},(0,i.Z)(l,"paste_data_images",!0),(0,i.Z)(l,"paste_enable_default_filters",!1),(0,i.Z)(l,"paste_postprocess",(function(e,t){t.node.querySelectorAll("img")})),(0,i.Z)(l,"draggable_modal",!0),(0,i.Z)(l,"content_style","body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"),l),name:"description"}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.sampleSolution})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Tags:"}),(0,w.jsx)(j(),{value:K.tags,onChange:ce}),(0,w.jsx)(d.Z.Control.Feedback,{type:"invalid",children:_.tags})]})]})]}),(0,w.jsxs)(d.Z.Group,{className:"mb-3",children:[(0,w.jsx)(d.Z.Label,{children:"Description:"}),(0,w.jsx)(Z.M,{tinymceScriptSrc:"/tinymce/tinymce.min.js",onInit:function(t,a){return e.current=a},init:(c={height:450,menubar:!0,selector:"textarea",block_unsupported_drop:!1,automatic_uploads:!0,file_picker_callback:function(e,t,a){"file"==a.filetype&&e("mypage.html",{text:"My text"}),"image"==a.filetype&&e("myimage.jpg",{alt:"My alt text"}),"media"==a.filetype&&e("movie.mp4",{source2:"alt.ogg",poster:"image.jpg"})},plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","grid","tiny_mce_wiris","code","table","link","media","codesample"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | grid_insert | tiny_mce_wiris_formulaEditor tiny_mce_wiris_formulaEditorChemistry | help | image",images_upload_handler:g.Z,images_upload_credentials:!0,paste_data_images:!0,paste_as_text:!0},(0,i.Z)(c,"paste_data_images",!0),(0,i.Z)(c,"paste_enable_default_filters",!1),(0,i.Z)(c,"paste_postprocess",(function(e,t){t.node.querySelectorAll("img")})),(0,i.Z)(c,"draggable_modal",!0),(0,i.Z)(c,"content_style","body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"),c),name:"description"})]}),(0,w.jsxs)(p.Z,{type:"submit",variant:"primary",className:"float-end",children:[(0,w.jsx)("i",{className:"fa fa-save"})," Save"]})]})}})})]})}}}]);