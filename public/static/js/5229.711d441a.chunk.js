"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5229],{84379:function(e,n,a){a.d(n,{Z:function(){return m}});var r=a(1413),t=a(21366),i=a(465),s=a(93298),c=a(42982),o=a(47313),d=a(38804),l=a(46417),u=function(e,n){var a=n-e+1;return Array.from({length:a},(function(n,a){return a+e}))},f=function(e){var n=e.search,a=e.pagination,t=e.onChange,i=e.siblingCount,s=void 0===i?1:i,f=e.className,m=function(e){var n=e.totalCount,a=e.pageSize,r=e.siblingCount,t=void 0===r?1:r,i=e.currentPage;return(0,o.useMemo)((function(){var e=Math.ceil(n/a);if(t+5>=e)return u(1,e);var r=Math.max(i-t,1),s=Math.min(i+t,e),o=r>2,d=s<e-2,l=1,f=e;if(!o&&d){var m=u(1,3+2*t);return[].concat((0,c.Z)(m),["DOTS",e])}if(o&&!d){var p=u(e-(3+2*t)+1,e);return[l,"DOTS"].concat((0,c.Z)(p))}if(o&&d){var h=u(r,s);return[l,"DOTS"].concat((0,c.Z)(h),["DOTS",f])}}),[n,a,t,i])}({currentPage:a.page,totalCount:a.totalCount,pageSize:a.pageSize,siblingCount:s});if(0===a.page||m.length<1)return null;var p=m[m.length-1];return(0,l.jsxs)(d.Z,{className:f,children:[(0,l.jsx)(d.Z.First,{onClick:function(){t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:1})})}}),(0,l.jsx)(d.Z.Prev,{onClick:function(){a.page>1&&t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:a.page-1})})}}),m.map((function(e,i){return"DOTS"===e?(0,l.jsx)(d.Z.Ellipsis,{},i):a.page===e?(0,l.jsx)(d.Z.Item,{active:!0,onClick:function(){return t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:e})})},children:e},i):(0,l.jsx)(d.Z.Item,{onClick:function(){return t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:e})})},children:e},i)})),(0,l.jsx)(d.Z.Next,{onClick:function(){a.page<p&&t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:a.page+1})})}}),(0,l.jsx)(d.Z.Last,{onClick:function(){t({search:n,pagination:(0,r.Z)((0,r.Z)({},a),{},{page:p})})}})]})},m=function(e){var n=e.pageItems,a=void 0===n?[5,10,20,50,100]:n,c=e.columns,o=e.data,d=void 0===o?[]:o,u=e.options,m=void 0===u?{responsive:!0,bordered:!0,center:!0}:u,p=e.pagination,h=void 0===p?{page:1,totalCount:10,pageSize:10}:p,v=e.sort,x=e.search,g=e.onChange,Z=e.emptyText,b=void 0===Z?"Empty data":Z,j=e.onRow,y=void 0===j?function(){}:j;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,l.jsx)(t.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:h.pageSize,onChange:function(e){return g({search:x,pagination:(0,r.Z)((0,r.Z)({},h),{},{pageSize:Number(e.target.value),page:1})})},children:a.map((function(e,n){return(0,l.jsx)("option",{value:e,children:e},n)}))}),(0,l.jsx)(t.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&g({search:e.target.value,pagination:(0,r.Z)((0,r.Z)({},h),{},{page:1})})}(e)}})]}),(0,l.jsxs)(i.Z,{className:"datatable "+(m.center?"text-center":""),responsive:m.responsive,bordered:m.bordered,hover:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:c.map((function(e,n){return(0,l.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,l.jsxs)(s.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,n){var a="asc";void 0===n?a="asc":"asc"===n.dir?a="desc":"desc"===n.dir&&(a="asc"),g({search:x,pagination:h,sort:{key:e,dir:a}})}(e.key,v)},children:[("undefined"===typeof v||v.key!==e.key)&&(0,l.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof v&&v.key===e.key&&"asc"===v.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof v&&v.key===e.key&&"desc"===v.dir&&(0,l.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},n)}))})}),(0,l.jsx)("tbody",{children:d.length?d.map((function(e,n){return(0,l.jsx)("tr",{onClick:function(){return y(e._id)},children:c.map((function(a,r){return a.render?(0,l.jsx)("td",{children:a.render(e,n)},r):(0,l.jsx)("td",{children:e[a.key]},r)}))},n)})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:c.length,className:"text-center text-danger",children:b})})})]}),(0,l.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,l.jsx)(f,{search:x,pagination:h,onChange:g})})]})}},35229:function(e,n,a){a.r(n),a.d(n,{default:function(){return x}});var r=a(74165),t=a(1413),i=a(15861),s=a(4942),c=a(70885),o=a(47313),d=a(93298),l=a(65832),u=a(27998),f=a(2135),m=a(34491),p=a(84379),h=a(24751),v=a(46417),x=function(){var e=(0,o.useRef)(null),n=(0,o.useState)(0),a=(0,c.Z)(n,2),x=a[0],g=a[1],Z=(0,o.useState)([]),b=(0,c.Z)(Z,2),j=b[0],y=b[1],N=(0,o.useState)(),k=(0,c.Z)(N,2),C=k[0],w=k[1],S=(0,o.useState)(""),P=(0,c.Z)(S,2),z=P[0],T=P[1],E=(0,o.useState)({page:1,totalCount:0,pageSize:10}),O=(0,c.Z)(E,2),D=O[0],L=O[1],R=[{key:"no",name:"No",width:"5%",render:function(e,n){return n+1}},{key:"no",name:"Order",width:"10%",render:function(e,n){return e.no}},{key:"name",width:"15%",name:"Name"},{key:"permission",name:"Access",width:"10%",render:function(e,n){return 0===e.permission?"Open":1===e.permission?"Free":"Premium"}},{key:"year",name:"Year",width:"10%",render:function(e,n){return e.topic.module.subject.year.name}},{key:"subject",name:"Subject",width:"10%",render:function(e,n){return e.topic.module.subject.name}},{key:"module",name:"Module",width:"15%",render:function(e,n){return e.topic.module.name}},{key:"topic",name:"Topic",width:"15%",render:function(e,n){return e.topic.name}},(0,s.Z)({key:"action",name:"Action",width:"10%",render:function(e,n){return(0,v.jsxs)("div",{children:[(0,v.jsx)(f.Link,{className:"btn btn-sm btn-outline-success me-1",to:"/admin/subtopics/edit/".concat(e._id),children:(0,v.jsx)("i",{className:"fa fa-edit"})}),(0,v.jsx)(d.Z,{variant:"btn btn-sm btn-outline-danger",size:"sm",onClick:function(){return W(e)},children:(0,v.jsx)("i",{className:"fa fa-trash"})})]})},sortable:!1},"width",90)],I=(0,o.useState)(!1),M=(0,c.Z)(I,2),A=M[0],F=M[1],H=(0,o.useState)({}),B=(0,c.Z)(H,2),_=B[0],K=B[1];(0,o.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.get("admin/sub-topics",{params:{search:z,length:D.pageSize,page:D.page,sortKey:C?C.key:"",sortDir:C?C.dir:""}});case 2:n=e.sent,a=n.data,y(a.data),L((0,t.Z)((0,t.Z)({},D),{},{totalCount:a.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[x]);var W=function(n){K(n),F(!0),setTimeout((function(){e.current.focus()}),500)},Y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.delete("admin/sub-topics/".concat(_._id));case 2:n=e.sent,(a=n.data).success?(g(!x),F(!1),m.Am.success(a.msg)):m.Am.error(a.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(l.Z,{children:[(0,v.jsx)(l.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,v.jsxs)(l.Z.Title,{as:"h1",bsPrefix:"card-title text-light mb-0",style:{fontSize:24},children:["Subtopics management",(0,v.jsxs)(f.Link,{className:"btn btn-primary btn-sm float-end",to:"/admin/subtopics/create",children:[(0,v.jsx)("i",{className:"fa fa-plus"})," New subtopic"]})]})}),(0,v.jsx)(l.Z.Body,{children:(0,v.jsx)(p.Z,{columns:R,data:j,sort:C,pagination:D,onChange:function(e){var n=e.search,a=e.pagination,r=e.sort;w(r),T(n),L(a),g(!x)}})}),(0,v.jsxs)(u.Tk,{visible:A,onClose:function(){return F(!1)},children:[(0,v.jsx)(u.p0,{children:(0,v.jsx)(u.fl,{children:(0,v.jsx)("h1",{children:"Are you sure?"})})}),(0,v.jsx)(u.sD,{children:"Deleting is permanent and cannot be undone."}),(0,v.jsxs)(u.Ym,{children:[(0,v.jsxs)(u.u5,{color:"primary",ref:e,onClick:Y,children:[(0,v.jsx)("i",{className:"fa fa-thumbs-up"})," Delete"]}),(0,v.jsxs)(u.u5,{color:"danger",onClick:function(){return F(!1)},children:[(0,v.jsx)("i",{className:"fa fa-thumbs-down"})," Cancel"]})]})]})]})}},65832:function(e,n,a){a.d(n,{Z:function(){return T}});var r=a(1413),t=a(45987),i=a(46123),s=a.n(i),c=a(47313),o=a(68524),d=a(28864),l=a(96205),u=a(46417),f=["bsPrefix","className","variant","as"],m=c.forwardRef((function(e,n){var a=e.bsPrefix,i=e.className,c=e.variant,d=e.as,l=void 0===d?"img":d,m=(0,t.Z)(e,f),p=(0,o.vE)(a,"card-img");return(0,u.jsx)(l,(0,r.Z)({ref:n,className:s()(c?"".concat(p,"-").concat(c):p,i)},m))}));m.displayName="CardImg";var p=m,h=a(15614),v=["bsPrefix","className","as"],x=c.forwardRef((function(e,n){var a=e.bsPrefix,i=e.className,d=e.as,l=void 0===d?"div":d,f=(0,t.Z)(e,v),m=(0,o.vE)(a,"card-header"),p=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,u.jsx)(h.Z.Provider,{value:p,children:(0,u.jsx)(l,(0,r.Z)((0,r.Z)({ref:n},f),{},{className:s()(i,m)}))})}));x.displayName="CardHeader";var g=x,Z=["bsPrefix","className","bg","text","border","body","children","as"],b=(0,l.Z)("h5"),j=(0,l.Z)("h6"),y=(0,d.Z)("card-body"),N=(0,d.Z)("card-title",{Component:b}),k=(0,d.Z)("card-subtitle",{Component:j}),C=(0,d.Z)("card-link",{Component:"a"}),w=(0,d.Z)("card-text",{Component:"p"}),S=(0,d.Z)("card-footer"),P=(0,d.Z)("card-img-overlay"),z=c.forwardRef((function(e,n){var a=e.bsPrefix,i=e.className,c=e.bg,d=e.text,l=e.border,f=e.body,m=e.children,p=e.as,h=void 0===p?"div":p,v=(0,t.Z)(e,Z),x=(0,o.vE)(a,"card");return(0,u.jsx)(h,(0,r.Z)((0,r.Z)({ref:n},v),{},{className:s()(i,x,c&&"bg-".concat(c),d&&"text-".concat(d),l&&"border-".concat(l)),children:f?(0,u.jsx)(y,{children:m}):m}))}));z.displayName="Card",z.defaultProps={body:!1};var T=Object.assign(z,{Img:p,Title:N,Subtitle:k,Body:y,Link:C,Text:w,Header:g,Footer:S,ImgOverlay:P})},38804:function(e,n,a){a.d(n,{Z:function(){return N}});var r=a(1413),t=a(45987),i=a(46123),s=a.n(i),c=a(47313),o=a(68524),d=a(48091),l=a(46417),u=["active","disabled","className","style","activeLabel","children"],f=["children"],m=c.forwardRef((function(e,n){var a=e.active,i=e.disabled,c=e.className,o=e.style,f=e.activeLabel,m=e.children,p=(0,t.Z)(e,u),h=a||i?"span":d.Z;return(0,l.jsx)("li",{ref:n,style:o,className:s()(c,"page-item",{active:a,disabled:i}),children:(0,l.jsxs)(h,(0,r.Z)((0,r.Z)({className:"page-link"},p),{},{children:[m,a&&f&&(0,l.jsx)("span",{className:"visually-hidden",children:f})]}))})}));m.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},m.displayName="PageItem";var p=m;function h(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=c.forwardRef((function(e,i){var s=e.children,c=(0,t.Z)(e,f);return(0,l.jsxs)(m,(0,r.Z)((0,r.Z)({},c),{},{ref:i,children:[(0,l.jsx)("span",{"aria-hidden":"true",children:s||n}),(0,l.jsx)("span",{className:"visually-hidden",children:a})]}))}));return i.displayName=e,i}var v=h("First","\xab"),x=h("Prev","\u2039","Previous"),g=h("Ellipsis","\u2026","More"),Z=h("Next","\u203a"),b=h("Last","\xbb"),j=["bsPrefix","className","size"],y=c.forwardRef((function(e,n){var a=e.bsPrefix,i=e.className,c=e.size,d=(0,t.Z)(e,j),u=(0,o.vE)(a,"pagination");return(0,l.jsx)("ul",(0,r.Z)((0,r.Z)({ref:n},d),{},{className:s()(i,u,c&&"".concat(u,"-").concat(c))}))}));y.displayName="Pagination";var N=Object.assign(y,{First:v,Prev:x,Ellipsis:g,Item:p,Next:Z,Last:b})},465:function(e,n,a){var r=a(1413),t=a(45987),i=a(46123),s=a.n(i),c=a(47313),o=a(68524),d=a(46417),l=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=c.forwardRef((function(e,n){var a=e.bsPrefix,i=e.className,c=e.striped,u=e.bordered,f=e.borderless,m=e.hover,p=e.size,h=e.variant,v=e.responsive,x=(0,t.Z)(e,l),g=(0,o.vE)(a,"table"),Z=s()(i,g,h&&"".concat(g,"-").concat(h),p&&"".concat(g,"-").concat(p),c&&"".concat(g,"-").concat("string"===typeof c?"striped-".concat(c):"striped"),u&&"".concat(g,"-bordered"),f&&"".concat(g,"-borderless"),m&&"".concat(g,"-hover")),b=(0,d.jsx)("table",(0,r.Z)((0,r.Z)({},x),{},{className:Z,ref:n}));if(v){var j="".concat(g,"-responsive");return"string"===typeof v&&(j="".concat(j,"-").concat(v)),(0,d.jsx)("div",{className:j,children:b})}return b}));n.Z=u}}]);