"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[71],{30286:function(e,n,t){t.r(n);var a=t(1413),r=t(74165),s=t(15861),i=t(70885),o=t(47313),c=t(65832),l=t(21366),u=t(93298),d=t(7410),f=t(3463),m=t(24751),v=t(34491),p=t(58467),b=t(46417);n.default=function(){var e=(0,p.UO)(),n=(0,p.s0)(),t=(0,o.useState)([]),h=(0,i.Z)(t,2),Z=h[0],x=h[1],j=(0,o.useState)([]),g=(0,i.Z)(j,2),y=g[0],N=g[1],C=(0,o.useState)([]),P=(0,i.Z)(C,2),w=P[0],k=P[1],_=(0,o.useState)({no:"",year:"",subject:"",name:"",description:""}),O=(0,i.Z)(_,2),B=O[0],I=O[1],R=f.Ry({no:f.Rx().typeError("Must be a number.").required("Please enter an order.").test("","Must be between 1 and 99.",(function(e){return e||(e=0),!(e<1||e>99)})),subject:f.Z_("Choose a subject.").required("Must be valid."),name:f.Z_("Enter a topic name.").test("len","Must be less than 64 characters.",(function(e){return e||(e=""),e.length<64})).required("Please enter a name.")});(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Z.get("admin/years/get-all-populate");case 2:n=e.sent,t=n.data,x(t),k(t.length?t[0].subjects:[]),N(t.length?t[0].subjects[0].modules:[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.useEffect)((function(){var n=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var t,s,i;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,n.next=3,m.Z.get("admin/topics/".concat(t));case 3:s=n.sent,(i=s.data).status?I((0,a.Z)((0,a.Z)({},B),{},{no:i.data.no,year:i.data.module.subject.year._id,subject:i.data.module.subject._id,module:i.data.module._id,name:i.data.name,description:i.data.description})):v.Am.error(i.msg);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var S=function(e){var n=Z.findIndex((function(n){return n._id===e.target.value}));Z.length>n&&Z[n].subjects.length>0&&Z[n].subjects[0].modules.length>0&&Z[n].subjects[0].modules[0].topics.length>0&&Z[n].subjects[0].modules[0].topics[0].no,k(Z[n].subjects),N(Z[n].subjects.length?Z[n].subjects[0].modules:[]),I((0,a.Z)((0,a.Z)({},B),{},{year:Z[n]._id,subject:Z[n].subjects.length?Z[n].subjects[0]._id:"",module:Z[n].subjects.length&&Z[n].subjects[0].modules.length?Z[n].subjects[0].modules[0]._id:""}))},E=function(e){var n,t=w.findIndex((function(n){return n._id===e.target.value}));n=w.length>t&&w[t].modules.length>0&&w[t].modules[0].topics.length>0?w[t].modules[0].topics[0].no:0,N(w[t].modules),I((0,a.Z)((0,a.Z)({},B),{},{subject:e.target.value,module:w[t].modules.length?w[t].modules[0]._id:"",no:n+1}))},F=function(e){var n,t=y.findIndex((function(n){return n._id===e.target.value}));n=y.length>t&&y[t].topics.length>0?y[t].topics[0].no:0,I((0,a.Z)((0,a.Z)({},B),{},{module:e.target.value,no:n+1}))},L=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(a,s){var i,o,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.resetForm,o=e.id,t.next=4,m.Z.put("admin/topics/".concat(o),a);case 4:c=t.sent,(l=c.data).status?(v.Am.success(l.msg),i(),n("/admin/topics")):v.Am.error(l.msg);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,b.jsxs)(c.Z,{children:[(0,b.jsx)(c.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,b.jsx)(c.Z.Title,{bsPrefix:"card-title mb-0 text-light",as:"h1",children:"Edit topic"})}),(0,b.jsx)(c.Z.Body,{children:(0,b.jsx)(d.J9,{validationSchema:R,validateOnChange:!1,validateOnBlur:!1,onSubmit:L,initialValues:B,enableReinitialize:!0,children:function(e){var n=e.handleSubmit,t=e.handleChange,a=e.handleBlur,r=e.values,s=e.touched,i=e.errors;return(0,b.jsxs)(l.Z,{noValidate:!0,onSubmit:n,children:[(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Year:"}),(0,b.jsx)(l.Z.Select,{name:"year",value:B.year,onChange:S,onBlur:a,touched:s,isInvalid:!!i.year,children:Z.map((function(e,n){return(0,b.jsx)("option",{value:e._id,children:e.name},n)}))}),(0,b.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.year})]}),(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Subject:"}),(0,b.jsx)(l.Z.Select,{name:"subject",value:B.subject,onChange:E,onBlur:a,touched:s,isInvalid:!!i.subject,children:w.map((function(e,n){return(0,b.jsx)("option",{value:e._id,children:e.name},n)}))}),(0,b.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.subject})]}),(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Module:"}),(0,b.jsx)(l.Z.Select,{name:"module",value:B.module,onChange:F,onBlur:a,touched:s,isInvalid:!!i.module,children:y.map((function(e,n){return(0,b.jsx)("option",{value:e._id,children:e.name},n)}))}),(0,b.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.module})]}),(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Order:"}),(0,b.jsx)(l.Z.Control,{type:"text",placeholder:"Please enter a topic order.",name:"no",onChange:t,onBlur:a,value:r.no,touched:s,isInvalid:!!i.no}),(0,b.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.no})]}),(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Topic:"}),(0,b.jsx)(l.Z.Control,{type:"text",placeholder:"Please enter a topic name.",name:"name",onChange:t,onBlur:a,value:r.name,touched:s,isInvalid:!!i.name}),(0,b.jsx)(l.Z.Control.Feedback,{type:"invalid",children:i.name})]}),(0,b.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,b.jsx)(l.Z.Label,{children:"Description:"}),(0,b.jsx)(l.Z.Control,{as:"textarea",placeholder:"Please enter a topic description.",name:"description",onChange:t,onBlur:a,value:r.description,rows:10})]}),(0,b.jsxs)(u.Z,{type:"submit",variant:"primary",className:"float-end",children:[(0,b.jsx)("i",{className:"fa fa-save"})," Update"]})]})}})})]})}},16184:function(e,n,t){t.d(n,{FT:function(){return o}});var a=t(70885),r=t(47313),s=t(46417),i=["as","disabled"];function o(e){var n=e.tagName,t=e.disabled,a=e.href,r=e.target,s=e.rel,i=e.role,o=e.onClick,c=e.tabIndex,l=void 0===c?0:c,u=e.type;n||(n=null!=a||null!=r||null!=s?"a":"button");var d={tagName:n};if("button"===n)return[{type:u||"button",disabled:t},d];var f=function(e){(t||"a"===n&&function(e){return!e||"#"===e.trim()}(a))&&e.preventDefault(),t?e.stopPropagation():null==o||o(e)};return"a"===n&&(a||(a="#"),t&&(a=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:t?void 0:l,href:a,target:"a"===n?r:void 0,"aria-disabled":t||void 0,rel:"a"===n?s:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},d]}var c=r.forwardRef((function(e,n){var t=e.as,r=e.disabled,c=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,i),l=o(Object.assign({tagName:t,disabled:r},c)),u=(0,a.Z)(l,2),d=u[0],f=u[1].tagName;return(0,s.jsx)(f,Object.assign({},c,d,{ref:n}))}));c.displayName="Button",n.ZP=c},93298:function(e,n,t){var a=t(1413),r=t(70885),s=t(45987),i=t(46123),o=t.n(i),c=t(47313),l=t(16184),u=t(68524),d=t(46417),f=["as","bsPrefix","variant","size","active","className"],m=c.forwardRef((function(e,n){var t=e.as,i=e.bsPrefix,c=e.variant,m=e.size,v=e.active,p=e.className,b=(0,s.Z)(e,f),h=(0,u.vE)(i,"btn"),Z=(0,l.FT)((0,a.Z)({tagName:t},b)),x=(0,r.Z)(Z,2),j=x[0],g=x[1].tagName;return(0,d.jsx)(g,(0,a.Z)((0,a.Z)((0,a.Z)({},j),b),{},{ref:n,className:o()(p,h,v&&"active",c&&"".concat(h,"-").concat(c),m&&"".concat(h,"-").concat(m),b.href&&b.disabled&&"disabled")}))}));m.displayName="Button",m.defaultProps={variant:"primary",active:!1,disabled:!1},n.Z=m},65832:function(e,n,t){t.d(n,{Z:function(){return B}});var a=t(1413),r=t(45987),s=t(46123),i=t.n(s),o=t(47313),c=t(68524),l=t(28864),u=t(96205),d=t(46417),f=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,o=e.variant,l=e.as,u=void 0===l?"img":l,m=(0,r.Z)(e,f),v=(0,c.vE)(t,"card-img");return(0,d.jsx)(u,(0,a.Z)({ref:n,className:i()(o?"".concat(v,"-").concat(o):v,s)},m))}));m.displayName="CardImg";var v=m,p=t(15614),b=["bsPrefix","className","as"],h=o.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,l=e.as,u=void 0===l?"div":l,f=(0,r.Z)(e,b),m=(0,c.vE)(t,"card-header"),v=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,d.jsx)(p.Z.Provider,{value:v,children:(0,d.jsx)(u,(0,a.Z)((0,a.Z)({ref:n},f),{},{className:i()(s,m)}))})}));h.displayName="CardHeader";var Z=h,x=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,u.Z)("h5"),g=(0,u.Z)("h6"),y=(0,l.Z)("card-body"),N=(0,l.Z)("card-title",{Component:j}),C=(0,l.Z)("card-subtitle",{Component:g}),P=(0,l.Z)("card-link",{Component:"a"}),w=(0,l.Z)("card-text",{Component:"p"}),k=(0,l.Z)("card-footer"),_=(0,l.Z)("card-img-overlay"),O=o.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,o=e.bg,l=e.text,u=e.border,f=e.body,m=e.children,v=e.as,p=void 0===v?"div":v,b=(0,r.Z)(e,x),h=(0,c.vE)(t,"card");return(0,d.jsx)(p,(0,a.Z)((0,a.Z)({ref:n},b),{},{className:i()(s,h,o&&"bg-".concat(o),l&&"text-".concat(l),u&&"border-".concat(u)),children:f?(0,d.jsx)(y,{children:m}):m}))}));O.displayName="Card",O.defaultProps={body:!1};var B=Object.assign(O,{Img:v,Title:N,Subtitle:C,Body:y,Link:P,Text:w,Header:Z,Footer:k,ImgOverlay:_})},15614:function(e,n,t){var a=t(47313).createContext(null);a.displayName="CardHeaderContext",n.Z=a},28864:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(1413),r=t(45987),s=t(46123),i=t.n(s),o=/-(.)/g;var c=t(47313),l=t(68524),u=t(46417),d=["className","bsPrefix","as"],f=function(e){return e[0].toUpperCase()+(n=e,n.replace(o,(function(e,n){return n.toUpperCase()}))).slice(1);var n};function m(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.displayName,s=void 0===t?f(e):t,o=n.Component,m=n.defaultProps,v=c.forwardRef((function(n,t){var s=n.className,c=n.bsPrefix,f=n.as,m=void 0===f?o||"div":f,v=(0,r.Z)(n,d),p=(0,l.vE)(c,e);return(0,u.jsx)(m,(0,a.Z)({ref:t,className:i()(s,p)},v))}));return v.defaultProps=m,v.displayName=s,v}},96205:function(e,n,t){var a=t(1413),r=t(47313),s=t(46123),i=t.n(s),o=t(46417);n.Z=function(e){return r.forwardRef((function(n,t){return(0,o.jsx)("div",(0,a.Z)((0,a.Z)({},n),{},{ref:t,className:i()(n.className,e)}))}))}},21024:function(e){var n=function(){};e.exports=n},11752:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(61120);function r(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=(0,a.Z)(e)););return e}function s(){return s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,n,t){var a=r(e,n);if(a){var s=Object.getOwnPropertyDescriptor(a,n);return s.get?s.get.call(arguments.length<3?e:t):s.value}},s.apply(this,arguments)}}}]);