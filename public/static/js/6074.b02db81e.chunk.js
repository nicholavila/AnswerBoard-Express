"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6074],{84379:function(e,n,a){a.d(n,{Z:function(){return h}});var t=a(1413),r=a(21366),s=a(465),i=a(93298),c=a(42982),o=a(47313),l=a(38804),d=a(46417),u=function(e,n){var a=n-e+1;return Array.from({length:a},(function(n,a){return a+e}))},f=function(e){var n=e.search,a=e.pagination,r=e.onChange,s=e.siblingCount,i=void 0===s?1:s,f=e.className,h=function(e){var n=e.totalCount,a=e.pageSize,t=e.siblingCount,r=void 0===t?1:t,s=e.currentPage;return(0,o.useMemo)((function(){var e=Math.ceil(n/a);if(r+5>=e)return u(1,e);var t=Math.max(s-r,1),i=Math.min(s+r,e),o=t>2,l=i<e-2,d=1,f=e;if(!o&&l){var h=u(1,3+2*r);return[].concat((0,c.Z)(h),["DOTS",e])}if(o&&!l){var p=u(e-(3+2*r)+1,e);return[d,"DOTS"].concat((0,c.Z)(p))}if(o&&l){var m=u(t,i);return[d,"DOTS"].concat((0,c.Z)(m),["DOTS",f])}}),[n,a,r,s])}({currentPage:a.page,totalCount:a.totalCount,pageSize:a.pageSize,siblingCount:i});if(0===a.page||h.length<1)return null;var p=h[h.length-1];return(0,d.jsxs)(l.Z,{className:f,children:[(0,d.jsx)(l.Z.First,{onClick:function(){r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:1})})}}),(0,d.jsx)(l.Z.Prev,{onClick:function(){a.page>1&&r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:a.page-1})})}}),h.map((function(e,s){return"DOTS"===e?(0,d.jsx)(l.Z.Ellipsis,{},s):a.page===e?(0,d.jsx)(l.Z.Item,{active:!0,onClick:function(){return r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:e})})},children:e},s):(0,d.jsx)(l.Z.Item,{onClick:function(){return r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:e})})},children:e},s)})),(0,d.jsx)(l.Z.Next,{onClick:function(){a.page<p&&r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:a.page+1})})}}),(0,d.jsx)(l.Z.Last,{onClick:function(){r({search:n,pagination:(0,t.Z)((0,t.Z)({},a),{},{page:p})})}})]})},h=function(e){var n=e.pageItems,a=void 0===n?[5,10,20,50,100]:n,c=e.columns,o=e.data,l=void 0===o?[]:o,u=e.options,h=void 0===u?{responsive:!0,bordered:!0,center:!0}:u,p=e.pagination,m=void 0===p?{page:1,totalCount:10,pageSize:10}:p,x=e.sort,g=e.search,Z=e.onChange,j=e.emptyText,v=void 0===j?"Empty data":j,y=e.onRow,k=void 0===y?function(){}:y;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,d.jsx)(r.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:m.pageSize,onChange:function(e){return Z({search:g,pagination:(0,t.Z)((0,t.Z)({},m),{},{pageSize:Number(e.target.value),page:1})})},children:a.map((function(e,n){return(0,d.jsx)("option",{value:e,children:e},n)}))}),(0,d.jsx)(r.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&Z({search:e.target.value,pagination:(0,t.Z)((0,t.Z)({},m),{},{page:1})})}(e)}})]}),(0,d.jsxs)(s.Z,{className:"datatable "+(h.center?"text-center":""),responsive:h.responsive,bordered:h.bordered,hover:!0,children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:c.map((function(e,n){return(0,d.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,d.jsxs)(i.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,n){var a="asc";void 0===n?a="asc":"asc"===n.dir?a="desc":"desc"===n.dir&&(a="asc"),Z({search:g,pagination:m,sort:{key:e,dir:a}})}(e.key,x)},children:[("undefined"===typeof x||x.key!==e.key)&&(0,d.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof x&&x.key===e.key&&"asc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof x&&x.key===e.key&&"desc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},n)}))})}),(0,d.jsx)("tbody",{children:l.length?l.map((function(e,n){return(0,d.jsx)("tr",{onClick:function(){return k(e._id)},children:c.map((function(a,t){return a.render?(0,d.jsx)("td",{children:a.render(e,n)},t):(0,d.jsx)("td",{children:e[a.key]},t)}))},n)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:c.length,className:"text-center text-danger",children:v})})})]}),(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,d.jsx)(f,{search:g,pagination:m,onChange:Z})})]})}},76074:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var t=a(74165),r=a(1413),s=a(15861),i=a(70885),c=a(47313),o=a(24751),l=a(45987),d=a(46123),u=a.n(d),f=a(68524),h=a(46417),p=["bsPrefix","bg","pill","text","className","as"],m=c.forwardRef((function(e,n){var a=e.bsPrefix,t=e.bg,s=e.pill,i=e.text,c=e.className,o=e.as,d=void 0===o?"span":o,m=(0,l.Z)(e,p),x=(0,f.vE)(a,"badge");return(0,h.jsx)(d,(0,r.Z)((0,r.Z)({ref:n},m),{},{className:u()(c,x,s&&"rounded-pill",i&&"text-".concat(i),t&&"bg-".concat(t))}))}));m.displayName="Badge",m.defaultProps={bg:"primary",pill:!1};var x=m,g=a(93298),Z=a(65832),j=a(41965),v=a(21366),y=a(84379),k=a(28745),b=a(34491),C=a(70816),w=a.n(C),N=function(){var e=(0,c.useState)(0),n=(0,i.Z)(e,2),a=n[0],l=n[1],d=(0,c.useState)([]),u=(0,i.Z)(d,2),f=u[0],p=u[1],m=(0,c.useState)(""),C=(0,i.Z)(m,2),N=C[0],S=C[1],z=(0,c.useState)(),D=(0,i.Z)(z,2),A=D[0],M=D[1],T=(0,c.useState)({page:1,totalCount:0,pageSize:10}),P=(0,i.Z)(T,2),H=P[0],O=P[1],R=(0,c.useState)({name:"",email:"",message:""}),B=(0,i.Z)(R,2),E=B[0],V=B[1],Y=(0,c.useState)(!1),F=(0,i.Z)(Y,2),L=F[0],_=F[1],G=(0,c.useState)(!1),I=(0,i.Z)(G,2),K=I[0],W=I[1],U=[{key:"_id",name:"No",width:65,render:function(e,n){return n+1}},{key:"name",name:"Name",width:120},{key:"email",name:"Email"},{key:"message",name:"Message",render:function(e){return(0,h.jsx)("div",{className:"message-description",children:e.message})},sortable:!1},{key:"createdAt",name:"Created date",render:function(e){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("i",{className:"fa fa-clock-o"})," ",w()(e.createdAt).format("YYYY.MM.DD HH:mm:ss")]})},width:185},{key:"status",name:"Status",render:function(e){return e.isRead?(0,h.jsx)(x,{pill:!0,bg:"success",children:"Read"}):(0,h.jsx)(x,{pill:!0,bg:"danger",children:"Not read"})},width:100,sortable:!1},{key:"action",name:"Action",width:90,render:function(e){return(0,h.jsxs)("div",{children:[(0,h.jsx)(g.Z,{variant:"outline-success",className:"me-1","data-tip":"View",size:"sm",onClick:function(){return q(e)},children:(0,h.jsx)("i",{className:"fa fa-eye"})},"1"),(0,h.jsx)(g.Z,{variant:"outline-danger","data-tip":"Delete",size:"sm",onClick:function(){return J(e)},children:(0,h.jsx)("i",{className:"fa fa-trash"})},"2"),(0,h.jsx)(k.Z,{})]})},sortable:!1}];(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("admin/messages",{params:{search:N,length:H.pageSize,page:H.page,sortKey:A?A.key:"",sortDir:A?A.dir:""}});case 2:n=e.sent,a=n.data,p(a.data),O((0,r.Z)((0,r.Z)({},H),{},{totalCount:a.totalCount}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]);var q=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){var r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isRead){e.next=8;break}return e.next=3,o.Z.put("admin/messages/".concat(n._id),{isRead:!0});case 3:r=e.sent,(s=r.data).success?(V(n),l(!a),_(!0)):b.Am.error(s.msg),e.next=10;break;case 8:V(n),_(!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(n),W(!0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.delete("admin/messages/".concat(E._id));case 2:n=e.sent,(r=n.data).success?(b.Am.success(r.msg),l(!a),W(!1)):b.Am.error(r.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(Z.Z,{children:[(0,h.jsx)(Z.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,h.jsx)(Z.Z.Title,{as:"h5",bsPrefix:"mb-0 card-title text-light",children:"Message management"})}),(0,h.jsx)(Z.Z.Body,{children:(0,h.jsx)(y.Z,{columns:U,data:f,sort:A,search:N,pagination:H,onChange:function(e){var n=e.search,t=e.pagination,r=e.sort;M(r),S(n),O(t),l(!a)}})}),(0,h.jsxs)(j.Z,{show:L,onHide:function(){return _(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,h.jsx)(j.Z.Header,{closeButton:!0,children:(0,h.jsxs)(j.Z.Title,{children:["Message ",(0,h.jsxs)("small",{children:["(",w()(E.createdAt).format("LLL"),")"]})]})}),(0,h.jsxs)(j.Z.Body,{children:[(0,h.jsx)(v.Z.Group,{className:"mb-3",children:(0,h.jsx)(v.Z.Control,{defaultValue:E.name,readOnly:!0})}),(0,h.jsx)(v.Z.Group,{className:"mb-3",children:(0,h.jsx)(v.Z.Control,{defaultValue:E.email,readOnly:!0})}),(0,h.jsx)(v.Z.Group,{children:(0,h.jsx)(v.Z.Control,{as:"textarea",defaultValue:E.message,rows:10})})]}),(0,h.jsx)(j.Z.Footer,{children:(0,h.jsx)(g.Z,{variant:"danger",onClick:function(){return _(!1)},children:"Close"})})]}),(0,h.jsxs)(j.Z,{show:K,onHide:function(){return W(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,h.jsx)(j.Z.Header,{children:(0,h.jsx)(j.Z.Title,{children:"Are you sure?"})}),(0,h.jsx)(j.Z.Body,{children:"Deleting is permanent and cannot be undone."}),(0,h.jsxs)(j.Z.Footer,{children:[(0,h.jsxs)(g.Z,{variant:"primary",onClick:Q,children:[(0,h.jsx)("i",{className:"fa fa-thumbs-up"})," Yes"]}),(0,h.jsxs)(g.Z,{variant:"danger",onClick:function(){return W(!1)},children:[(0,h.jsx)("i",{className:"fa fa-thumbs-down"})," No"]})]})]})]})}}}]);