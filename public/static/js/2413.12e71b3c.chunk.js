"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2413],{84379:function(e,a,n){n.d(a,{Z:function(){return m}});var t=n(1413),r=n(21366),s=n(465),i=n(93298),o=n(42982),c=n(47313),l=n(38804),d=n(46417),u=function(e,a){var n=a-e+1;return Array.from({length:n},(function(a,n){return n+e}))},f=function(e){var a=e.search,n=e.pagination,r=e.onChange,s=e.siblingCount,i=void 0===s?1:s,f=e.className,m=function(e){var a=e.totalCount,n=e.pageSize,t=e.siblingCount,r=void 0===t?1:t,s=e.currentPage;return(0,c.useMemo)((function(){var e=Math.ceil(a/n);if(r+5>=e)return u(1,e);var t=Math.max(s-r,1),i=Math.min(s+r,e),c=t>2,l=i<e-2,d=1,f=e;if(!c&&l){var m=u(1,3+2*r);return[].concat((0,o.Z)(m),["DOTS",e])}if(c&&!l){var h=u(e-(3+2*r)+1,e);return[d,"DOTS"].concat((0,o.Z)(h))}if(c&&l){var p=u(t,i);return[d,"DOTS"].concat((0,o.Z)(p),["DOTS",f])}}),[a,n,r,s])}({currentPage:n.page,totalCount:n.totalCount,pageSize:n.pageSize,siblingCount:i});if(0===n.page||m.length<1)return null;var h=m[m.length-1];return(0,d.jsxs)(l.Z,{className:f,children:[(0,d.jsx)(l.Z.First,{onClick:function(){r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:1})})}}),(0,d.jsx)(l.Z.Prev,{onClick:function(){n.page>1&&r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:n.page-1})})}}),m.map((function(e,s){return"DOTS"===e?(0,d.jsx)(l.Z.Ellipsis,{},s):n.page===e?(0,d.jsx)(l.Z.Item,{active:!0,onClick:function(){return r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:e})})},children:e},s):(0,d.jsx)(l.Z.Item,{onClick:function(){return r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:e})})},children:e},s)})),(0,d.jsx)(l.Z.Next,{onClick:function(){n.page<h&&r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:n.page+1})})}}),(0,d.jsx)(l.Z.Last,{onClick:function(){r({search:a,pagination:(0,t.Z)((0,t.Z)({},n),{},{page:h})})}})]})},m=function(e){var a=e.pageItems,n=void 0===a?[5,10,20,50,100]:a,o=e.columns,c=e.data,l=void 0===c?[]:c,u=e.options,m=void 0===u?{responsive:!0,bordered:!0,center:!0}:u,h=e.pagination,p=void 0===h?{page:1,totalCount:10,pageSize:10}:h,x=e.sort,Z=e.search,v=e.onChange,g=e.emptyText,j=void 0===g?"Empty data":g,b=e.onRow,y=void 0===b?function(){}:b;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"d-flex justify-content-between mb-3",children:[(0,d.jsx)(r.Z.Select,{size:"sm",style:{maxWidth:100},defaultValue:p.pageSize,onChange:function(e){return v({search:Z,pagination:(0,t.Z)((0,t.Z)({},p),{},{pageSize:Number(e.target.value),page:1})})},children:n.map((function(e,a){return(0,d.jsx)("option",{value:e,children:e},a)}))}),(0,d.jsx)(r.Z.Control,{size:"sm",type:"text",placeholder:"Search...",style:{maxWidth:200},onKeyUp:function(e){return function(e){13===e.keyCode&&v({search:e.target.value,pagination:(0,t.Z)((0,t.Z)({},p),{},{page:1})})}(e)}})]}),(0,d.jsxs)(s.Z,{className:"datatable "+(m.center?"text-center":""),responsive:m.responsive,bordered:m.bordered,hover:!0,children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:o.map((function(e,a){return(0,d.jsxs)("th",{style:{width:e.width?e.width:"auto"},children:[e.name,!1!==e.sortable&&(0,d.jsxs)(i.Z,{className:"sort-btn",size:"sm",variant:"link",onClick:function(){return function(e,a){var n="asc";void 0===a?n="asc":"asc"===a.dir?n="desc":"desc"===a.dir&&(n="asc"),v({search:Z,pagination:p,sort:{key:e,dir:n}})}(e.key,x)},children:[("undefined"===typeof x||x.key!==e.key)&&(0,d.jsx)("i",{className:"fa fa-arrows-v"}),"undefined"!==typeof x&&x.key===e.key&&"asc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-up"}),"undefined"!==typeof x&&x.key===e.key&&"desc"===x.dir&&(0,d.jsx)("i",{className:"fa fa-long-arrow-down"})]})]},a)}))})}),(0,d.jsx)("tbody",{children:l.length?l.map((function(e,a){return(0,d.jsx)("tr",{onClick:function(){return y(e._id)},children:o.map((function(n,t){return n.render?(0,d.jsx)("td",{children:n.render(e,a)},t):(0,d.jsx)("td",{children:e[n.key]},t)}))},a)})):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:o.length,className:"text-center text-danger",children:j})})})]}),(0,d.jsx)("div",{className:"d-flex align-items-center justify-content-end",children:(0,d.jsx)(f,{search:Z,pagination:p,onChange:v})})]})}},32413:function(e,a,n){n.r(a),n.d(a,{default:function(){return y}});var t=n(74165),r=n(1413),s=n(15861),i=n(70885),o=n(47313),c=n(24751),l=n(58467),d=n(93298),u=n(65832),f=n(41965),m=n(21366),h=n(98698),p=n(27998),x=n(84379),Z=n(28745),v=n(34491),g=n(7410),j=n(3463),b=n(46417),y=function(){var e=(0,o.useRef)(null),a=(0,o.useState)(0),n=(0,i.Z)(a,2),y=n[0],N=n[1],C=(0,l.s0)(),k=(0,o.useState)([]),w=(0,i.Z)(k,2),S=w[0],z=w[1],P=(0,o.useState)(""),E=(0,i.Z)(P,2),I=E[0],T=E[1],A=(0,o.useState)(),F=(0,i.Z)(A,2),D=F[0],L=F[1],R=(0,o.useState)({page:1,totalCount:0,pageSize:10}),O=(0,i.Z)(R,2),_=O[0],q=O[1],G=(0,o.useState)(0),M=(0,i.Z)(G,2),B=M[0],H=M[1],V=j.Ry({firstName:j.Z_().required("First name is required."),lastName:j.Z_().required("Last name is required."),email:j.Z_().email("Enter a vaild email.").required("Email is required."),password:j.Z_().required("Password is required.").min(8,"Password should be minimum 8 characters in length.")}),U=(0,o.useState)(!1),W=(0,i.Z)(U,2),K=W[0],J=W[1],Y=(0,o.useState)(!1),$=(0,i.Z)(Y,2),Q=$[0],X=$[1],ee=[{key:"_id",name:"No",width:65,render:function(e,a){return a+1}},{key:"firstName",name:"First name"},{key:"lastName",name:"Last name"},{key:"email",name:"Email"},{key:"role",name:"Role"},{key:"action",name:"Action",width:120,render:function(e){return(0,b.jsxs)("div",{children:[(0,b.jsx)(d.Z,{variant:"outline-success","data-tip":"Edit",size:"sm",className:"me-1",onClick:function(){return C("/admin/staff/".concat(e._id))},children:(0,b.jsx)("i",{className:"fa fa-edit"})},"1"),(0,b.jsx)(d.Z,{variant:"outline-primary","data-tip":e.status?"Disable":"Enable",size:"sm",className:"me-1",onClick:function(){te(e._id)},children:e.status?(0,b.jsx)("i",{className:"fa fa-thumbs-up"}):(0,b.jsx)("i",{className:"fa fa-thumbs-down"})},"2"),(0,b.jsx)(d.Z,{variant:"outline-danger","data-tip":"Delete",size:"sm",onClick:function(){return re(e._id)},children:(0,b.jsx)("i",{className:"fa fa-trash"})},"3"),(0,b.jsx)(Z.Z,{})]})},sortable:!1}];(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var a,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("admin/staffs",{params:{search:I,length:_.pageSize,page:_.page,sortKey:D?D.key:"",sortDir:D?D.dir:""}});case 2:a=e.sent,(n=a.data).data.map((function(e,a){1===e.role?e.role="staff":e.role="admin"})),z(n.data),q((0,r.Z)((0,r.Z)({},_),{},{totalCount:n.totalCount}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[y]);var ae=function(e){for(var a=e.toLowerCase().split(/[\s]+/),n=0;n<a.length;n++){for(var t=a[n].toLowerCase().split(/[\s-]+/),r=0;r<t.length;r++)t[r]=t[r].charAt(0).toUpperCase()+t[r].slice(1);a[n]=t.join("-").charAt(0).toUpperCase()+t.join("-").slice(1)}return a.join(" ")},ne=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a,n){var r,s,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,J(!1),a.role=1,a.firstName=ae(a.firstName),a.lastName=ae(a.lastName),e.next=7,c.Z.post("admin/staffs",{staff:a});case 7:s=e.sent,(i=s.data).status?(r(),v.Am.success(i.msg)):v.Am.error(i.msg),N(!y);case 11:case"end":return e.stop()}}),e)})));return function(a,n){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.put("admin/staffs/login-mng/".concat(a));case 2:(n=e.sent).data.status?(v.Am.success(n.data.msg),r=S.map((function(e,n){return e._id===a?(e.status=!e.status,e):e})),z(r)):v.Am.error(n.data.msg,"Warning!");case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),re=function(a){H(a),X(!0),setTimeout((function(){e.current.focus()}),500)},se=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(a){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.delete("admin/staffs/".concat(B));case 2:n=e.sent,(r=n.data).status?(v.Am.success(r.msg),N(!y),X(!1)):v.Am.error(r.msg);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(u.Z.Header,{style:{background:"#3c4b64"},bsPrefix:"card-header py-3",children:(0,b.jsxs)(u.Z.Title,{as:"h1",bsPrefix:"mb-0 card-title text-light",style:{fontSize:24},children:["Staff management",(0,b.jsxs)(d.Z,{variant:"primary",size:"sm",className:"float-end",onClick:function(){return J(!0)},children:[(0,b.jsx)("i",{className:"fa fa-plus"})," New staff"]})]})}),(0,b.jsx)(u.Z.Body,{children:(0,b.jsx)(x.Z,{columns:ee,data:S,sort:D,search:I,pagination:_,onChange:function(e){var a=e.search,n=e.pagination,t=e.sort;L(t),T(a),q(n),N(!y)}})}),(0,b.jsx)(f.Z,{size:"md",show:K,onHide:function(){return J(!1)},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:(0,b.jsx)(g.J9,{enableReinitialize:!0,validationSchema:V,validateOnChange:!1,validateOnBlur:!1,onSubmit:ne,initialValues:{firstName:"",lastName:"",email:"",password:"",status:!0,isSendInstructions:!0},children:function(e){var a=e.handleSubmit,n=e.handleChange,t=e.values,r=e.touched,s=e.errors,i=e.setFieldValue;return(0,b.jsxs)(m.Z,{noValidate:!0,onSubmit:a,children:[(0,b.jsx)(f.Z.Header,{closeButton:!0,children:(0,b.jsx)(f.Z.Title,{children:(0,b.jsx)("h1",{children:"New staff"})})}),(0,b.jsxs)(f.Z.Body,{children:[(0,b.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,b.jsx)(m.Z.Label,{children:"First name:"}),(0,b.jsx)(m.Z.Control,{type:"text",name:"firstName",onChange:n,value:t.firstName,isInvalid:!!s.firstName,touched:r}),(0,b.jsx)(m.Z.Control.Feedback,{type:"invalid",children:s.firstName})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,b.jsx)(m.Z.Label,{children:"Last name:"}),(0,b.jsx)(m.Z.Control,{type:"text",name:"lastName",onChange:n,value:t.lastName,isInvalid:!!s.lastName,touched:r}),(0,b.jsx)(m.Z.Control.Feedback,{type:"invalid",children:s.lastName})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,b.jsx)(m.Z.Label,{children:"Email:"}),(0,b.jsx)(m.Z.Control,{type:"email",name:"email",onChange:n,value:t.email,isInvalid:!!s.email,touched:r}),(0,b.jsx)(m.Z.Control.Feedback,{type:"invalid",children:s.email})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,b.jsx)(m.Z.Label,{children:"New password:"}),(0,b.jsxs)(h.Z,{children:[(0,b.jsx)(m.Z.Control,{type:"text",name:"password",onChange:n,value:t.password,isInvalid:!!s.password}),(0,b.jsx)(d.Z,{variant:"outline-primary",onClick:function(){i("password",function(){for(var e="abcdefghijklmnopqrstuvwxyz!@#$%^&*()ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*()0123456789",a="",n=0,t=e.length;n<12;++n)a+=e.charAt(Math.floor(Math.random()*t));return a}(),!0)},children:"Generate"}),(0,b.jsx)(m.Z.Control.Feedback,{type:"invalid",children:s.password})]})]}),(0,b.jsx)(m.Z.Group,{children:(0,b.jsxs)("label",{children:[(0,b.jsx)(g.gN,{type:"checkbox",name:"isSendInstructions"}),"\xa0\xa0\xa0Send sign-in instructions"]})})]}),(0,b.jsxs)(f.Z.Footer,{children:[(0,b.jsx)(d.Z,{type:"submit",variant:"primary",children:"Create"}),(0,b.jsxs)(d.Z,{variant:"danger",onClick:function(){return J(0)},children:[(0,b.jsx)("i",{className:"fa fa-times"})," Cancel"]})]})]})}})}),(0,b.jsxs)(p.Tk,{visible:Q,onClose:function(){return X(!1)},children:[(0,b.jsx)(p.p0,{children:(0,b.jsx)(p.fl,{children:(0,b.jsx)("h1",{children:"Are you sure?"})})}),(0,b.jsx)(p.sD,{children:"Deleting is permanent and cannot be undone."}),(0,b.jsxs)(p.Ym,{children:[(0,b.jsxs)(p.u5,{color:"primary",ref:e,onClick:function(){return se()},children:[(0,b.jsx)("i",{className:"fa fa-thumbs-up"})," Delete"]}),(0,b.jsxs)(p.u5,{color:"danger",onClick:function(){return X(!1)},children:[(0,b.jsx)("i",{className:"fa fa-thumbs-down"})," Cancel"]})]})]})]})}},65832:function(e,a,n){n.d(a,{Z:function(){return E}});var t=n(1413),r=n(45987),s=n(46123),i=n.n(s),o=n(47313),c=n(68524),l=n(28864),d=n(96205),u=n(46417),f=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,o=e.variant,l=e.as,d=void 0===l?"img":l,m=(0,r.Z)(e,f),h=(0,c.vE)(n,"card-img");return(0,u.jsx)(d,(0,t.Z)({ref:a,className:i()(o?"".concat(h,"-").concat(o):h,s)},m))}));m.displayName="CardImg";var h=m,p=n(15614),x=["bsPrefix","className","as"],Z=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,l=e.as,d=void 0===l?"div":l,f=(0,r.Z)(e,x),m=(0,c.vE)(n,"card-header"),h=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:m}}),[m]);return(0,u.jsx)(p.Z.Provider,{value:h,children:(0,u.jsx)(d,(0,t.Z)((0,t.Z)({ref:a},f),{},{className:i()(s,m)}))})}));Z.displayName="CardHeader";var v=Z,g=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,d.Z)("h5"),b=(0,d.Z)("h6"),y=(0,l.Z)("card-body"),N=(0,l.Z)("card-title",{Component:j}),C=(0,l.Z)("card-subtitle",{Component:b}),k=(0,l.Z)("card-link",{Component:"a"}),w=(0,l.Z)("card-text",{Component:"p"}),S=(0,l.Z)("card-footer"),z=(0,l.Z)("card-img-overlay"),P=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,o=e.bg,l=e.text,d=e.border,f=e.body,m=e.children,h=e.as,p=void 0===h?"div":h,x=(0,r.Z)(e,g),Z=(0,c.vE)(n,"card");return(0,u.jsx)(p,(0,t.Z)((0,t.Z)({ref:a},x),{},{className:i()(s,Z,o&&"bg-".concat(o),l&&"text-".concat(l),d&&"border-".concat(d)),children:f?(0,u.jsx)(y,{children:m}):m}))}));P.displayName="Card",P.defaultProps={body:!1};var E=Object.assign(P,{Img:h,Title:N,Subtitle:C,Body:y,Link:k,Text:w,Header:v,Footer:S,ImgOverlay:z})},98698:function(e,a,n){var t=n(45987),r=n(1413),s=n(46123),i=n.n(s),o=n(47313),c=n(28864),l=n(68524),d=n(56084),u=n(94354),f=n(46417),m=["bsPrefix","size","hasValidation","className","as"],h=(0,c.Z)("input-group-text",{Component:"span"}),p=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.size,c=e.hasValidation,d=e.className,h=e.as,p=void 0===h?"div":h,x=(0,t.Z)(e,m);n=(0,l.vE)(n,"input-group");var Z=(0,o.useMemo)((function(){return{}}),[]);return(0,f.jsx)(u.Z.Provider,{value:Z,children:(0,f.jsx)(p,(0,r.Z)((0,r.Z)({ref:a},x),{},{className:i()(d,n,s&&"".concat(n,"-").concat(s),c&&"has-validation")}))})}));p.displayName="InputGroup",a.Z=Object.assign(p,{Text:h,Radio:function(e){return(0,f.jsx)(h,{children:(0,f.jsx)(d.Z,(0,r.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,f.jsx)(h,{children:(0,f.jsx)(d.Z,(0,r.Z)({type:"checkbox"},e))})}})},94354:function(e,a,n){var t=n(47313).createContext(null);t.displayName="InputGroupContext",a.Z=t},465:function(e,a,n){var t=n(1413),r=n(45987),s=n(46123),i=n.n(s),o=n(47313),c=n(68524),l=n(46417),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=o.forwardRef((function(e,a){var n=e.bsPrefix,s=e.className,o=e.striped,u=e.bordered,f=e.borderless,m=e.hover,h=e.size,p=e.variant,x=e.responsive,Z=(0,r.Z)(e,d),v=(0,c.vE)(n,"table"),g=i()(s,v,p&&"".concat(v,"-").concat(p),h&&"".concat(v,"-").concat(h),o&&"".concat(v,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),u&&"".concat(v,"-bordered"),f&&"".concat(v,"-borderless"),m&&"".concat(v,"-hover")),j=(0,l.jsx)("table",(0,t.Z)((0,t.Z)({},Z),{},{className:g,ref:a}));if(x){var b="".concat(v,"-responsive");return"string"===typeof x&&(b="".concat(b,"-").concat(x)),(0,l.jsx)("div",{className:b,children:j})}return j}));a.Z=u}}]);